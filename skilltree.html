<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill Tree Visualization</title>
    <link rel="stylesheet" href="./skilltree.css">
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script src="./skilltree.js"></script>
    <script src="./skillbuilder.js"></script>

</head>

<body>
    <div>
        <button onclick="exportSkillsAsYAML()">Export Skills as YAML</button>
        <input type="file" id="importFileInput" accept=".yaml" style="display: none" onchange="handleImportFile(event)">
        <button onclick="document.getElementById('importFileInput').click()">Import Skills from YAML</button>
    </div>
    <h1 onclick="toggleVisible('skillBuilder')">Skill Builder</h1>
    <div id="skillBuilder">
        <form id="skillBuilderForm">
            <div class="flex-row">
                <div class="flex-column">
                    <div class="flex-row margin-all">
                        <label for="characterLevelLevel" class="min-width-100">Char Level</label>
                        <select id="characterLevel" class="min-width-100" onchange="levelUp()" name="characterLevel">
                            <!-- Options will be added here dynamically -->
                        </select>
                    </div>
                    <div class="flex-row margin-all">
                        <label class="min-width-100">Points available:</label>
                        <label id="skillPointsAvailable">1</label>
                    </div>
                    <div class="flex-row margin-all">
                        <label class="min-width-100">Points required:</label>
                        <label id="pointsUsed">0</label>
                    </div>
                    <div class="flex-row margin-all">
                        <input type="checkbox" id="addSkills" checked />
                        <label>Add skills</label>
                    </div>
                    <div class="flex-row margin-all">
                        <button type="button" id="clear-all-btn" onclick="clearSkills()">Clear all</button>
                    </div>
                </div>
                <div id="skillsToBuild" class="flow-column margin-all">
                    <!-- Options will be added here dynamically -->
                </div>
            </div>
        </form>
    </div>
    <h1 onclick="toggleVisible('skillTreeVisuation')">Skill Tree Visualization</h1>
    <div id="skillTreeVisuation">
        <div id="skillTreeContainer">
            <div id="skillTree" oncontextmenu="return false;"></div>
        </div>
        <label for="skillIdPrefix">Skill ID Prefix:</label>
        <input id="skillIdPrefix" value="SKILL_" onblur="updateSkillIdPrefix()" />
        <div>
            <button id="addSkillBtn" onclick="addNewSkill()">+ Add Skill</button>
            <button onclick="exportDiagramAsPNG()">Save Diagram as PNG</button>
            <button onClick="maximizeDiagram()">Go Fullscreen</button>

        </div>
        <div class="flex-row">
            <div id="skillEditor" class="skill-editor">
                <h2>Edit Skill</h2>
                <div id="skillForm">
                    <!-- Dynamically insert the skill form here -->
                </div>
            </div>
            <div id="skillList" class="skill-list">
                <!-- Dynamically display skill list here -->
            </div>
        </div>
    </div>

</body>

</html>